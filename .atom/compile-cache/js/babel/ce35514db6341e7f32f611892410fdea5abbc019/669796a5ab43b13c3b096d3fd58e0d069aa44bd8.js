function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }

var _libIndieDelegate = require('../lib/indie-delegate');

var _libIndieDelegate2 = _interopRequireDefault(_libIndieDelegate);

var _common = require('./common');

describe('IndieDelegate', function () {
  var indieDelegate = undefined;
  var indieDelegateLegacy = undefined;

  beforeEach(function () {
    indieDelegate = new _libIndieDelegate2['default']({
      name: 'Indie'
    }, 2);
    indieDelegateLegacy = new _libIndieDelegate2['default']({
      name: 'Indie Legacy'
    }, 1);
  });
  afterEach(function () {
    indieDelegate.dispose();
    indieDelegateLegacy.dispose();
  });

  it('has the basic linter properties', function () {
    expect(typeof indieDelegate.name).toBe('string');
    expect(indieDelegate.name).toBe('Indie');
    expect(typeof indieDelegate.scope).toBe('string');
    expect(indieDelegate.scope).toBe('project');
  });
  describe('::setMessages && ::getMessages && ::clearMessages', function () {
    it('works as expected', function () {
      var message = (0, _common.getMessage)(false);
      expect(indieDelegate.getMessages()).toEqual([]);
      indieDelegate.setMessages(message.location.file, [message]);
      expect(indieDelegate.getMessages()).toEqual([message]);
      indieDelegate.clearMessages();
      expect(indieDelegate.getMessages()).toEqual([]);
    });
  });
  describe('::setMessages', function () {
    it('overwrites previous messages for that file', function () {
      var messageA = (0, _common.getMessage)(false);
      var messageB = (0, _common.getMessage)(false);
      var messageC = (0, _common.getMessage)(false);
      expect(indieDelegate.getMessages()).toEqual([]);
      indieDelegate.setMessages(messageA.location.file, [messageA, messageB]);
      expect(indieDelegate.getMessages()).toEqual([messageA, messageB]);
      indieDelegate.setMessages(messageA.location.file, [messageA, messageC]);
      expect(indieDelegate.getMessages()).toEqual([messageA, messageC]);
      indieDelegate.setMessages(messageA.location.file, [messageB, messageC]);
      expect(indieDelegate.getMessages()).toEqual([messageB, messageC]);
      indieDelegate.setMessages(messageA.location.file, [messageC]);
      expect(indieDelegate.getMessages()).toEqual([messageC]);
      indieDelegate.setMessages(messageA.location.file, []);
      expect(indieDelegate.getMessages()).toEqual([]);
    });
    it('does not update if is disposed', function () {
      var timesUpdated = 0;
      indieDelegate.onDidUpdate(function () {
        timesUpdated++;
      });
      expect(timesUpdated).toBe(0);
      indieDelegate.setMessages(__filename, [(0, _common.getMessage)(__filename)]);
      expect(timesUpdated).toBe(1);
      indieDelegate.dispose();
      indieDelegate.setMessages(__filename, [(0, _common.getMessage)(__filename)]);
      expect(timesUpdated).toBe(1);
    });
    it('does update if not disposed', function () {
      var timesUpdated = 0;
      indieDelegate.onDidUpdate(function () {
        timesUpdated++;
      });
      expect(timesUpdated).toBe(0);
      indieDelegate.setMessages(__filename, [(0, _common.getMessage)(__filename)]);
      expect(timesUpdated).toBe(1);
      indieDelegate.setMessages(__filename, [(0, _common.getMessage)(__filename)]);
      expect(timesUpdated).toBe(2);
    });
    it('cries if message has a different filePath', function () {
      expect(function () {
        indieDelegate.setMessages(__filename, [(0, _common.getMessage)(__filename)]);
      }).not.toThrow();
      expect(function () {
        indieDelegate.setMessages(__filename, [(0, _common.getMessage)(__filename), (0, _common.getMessage)(__filename), (0, _common.getMessage)(__filename)]);
      }).not.toThrow();
      expect(function () {
        indieDelegate.setMessages(__filename, [(0, _common.getMessage)(false)]);
      }).toThrow('message.location.file does not match the given filePath');
      expect(function () {
        indieDelegate.setMessages(__filename, [(0, _common.getMessage)(__filename), (0, _common.getMessage)(false)]);
      }).toThrow('message.location.file does not match the given filePath');
      expect(function () {
        indieDelegate.setMessages(__filename, [(0, _common.getMessage)(__filename), (0, _common.getMessage)(false), (0, _common.getMessage)(__filename)]);
      }).toThrow('message.location.file does not match the given filePath');
      expect(function () {
        indieDelegate.setMessages(__filename, [(0, _common.getMessage)(__filename), (0, _common.getMessage)(__filename), (0, _common.getMessage)(false)]);
      }).toThrow('message.location.file does not match the given filePath');
    });
    it('does not add invalid messages', function () {
      expect(indieDelegate.getMessages().length).toBe(0);
      expect(atom.notifications.getNotifications().length).toBe(0);
      indieDelegate.setMessages(__filename, [{}]);
      expect(indieDelegate.getMessages().length).toBe(0);
      expect(atom.notifications.getNotifications().length).toBe(1);
      indieDelegate.setMessages(__filename, [(0, _common.getMessage)(__filename)]);
      expect(indieDelegate.getMessages().length).toBe(1);
      expect(atom.notifications.getNotifications().length).toBe(1);
    });
  });
  describe('::clearMessages', function () {
    it('does not update if disposed', function () {
      var timesUpdated = 0;
      indieDelegate.onDidUpdate(function () {
        timesUpdated++;
      });
      expect(timesUpdated).toBe(0);
      indieDelegate.setMessages(__filename, [(0, _common.getMessage)(__filename)]);
      expect(timesUpdated).toBe(1);
      indieDelegate.dispose();
      indieDelegate.clearMessages();
      expect(timesUpdated).toBe(1);
    });
    it('does update if not disposed', function () {
      var timesUpdated = 0;
      indieDelegate.onDidUpdate(function () {
        timesUpdated++;
      });
      expect(timesUpdated).toBe(0);
      indieDelegate.setMessages(__filename, [(0, _common.getMessage)(__filename)]);
      expect(timesUpdated).toBe(1);
      indieDelegate.clearMessages();
      expect(timesUpdated).toBe(2);
    });
  });
  describe('::setAllMessages', function () {
    it('automatically splits messages into filePath groups', function () {
      var messageA = (0, _common.getMessage)(false);
      var messageB = (0, _common.getMessage)(false);
      var messageC = (0, _common.getMessage)(false);
      var messageD = (0, _common.getMessage)(false);

      messageC.location.file = __filename;
      messageD.location.file = __filename;
      expect(indieDelegate.messages.size).toBe(0);
      indieDelegate.setAllMessages([messageA, messageB, messageC, messageD]);
      expect(indieDelegate.messages.size).toBe(2);

      var messagesA = indieDelegate.messages.get(messageA.location.file);
      expect(Array.isArray(messagesA)).toBe(true);
      expect(messagesA).toEqual([messageA, messageB]);

      var messagesB = indieDelegate.messages.get(messageC.location.file);
      expect(Array.isArray(messagesB)).toBe(true);
      expect(messagesB).toEqual([messageC, messageD]);
    });
    it('does not update if disposed', function () {
      var timesUpdated = 0;
      indieDelegate.onDidUpdate(function () {
        timesUpdated++;
      });
      expect(timesUpdated).toBe(0);
      indieDelegate.setAllMessages([(0, _common.getMessage)(false)]);
      expect(timesUpdated).toBe(1);
      indieDelegate.dispose();
      indieDelegate.setAllMessages([]);
      expect(timesUpdated).toBe(1);
    });
    it('does update if not disposed', function () {
      var timesUpdated = 0;
      indieDelegate.onDidUpdate(function () {
        timesUpdated++;
      });
      expect(timesUpdated).toBe(0);
      indieDelegate.setAllMessages([(0, _common.getMessage)(false)]);
      expect(timesUpdated).toBe(1);
      indieDelegate.setAllMessages([]);
      expect(timesUpdated).toBe(2);
    });
    it('does not add invalid messages', function () {
      expect(indieDelegate.getMessages().length).toBe(0);
      expect(atom.notifications.getNotifications().length).toBe(0);
      indieDelegate.setAllMessages([{}]);
      expect(indieDelegate.getMessages().length).toBe(0);
      expect(atom.notifications.getNotifications().length).toBe(1);
      indieDelegate.setAllMessages([(0, _common.getMessage)(__filename)]);
      expect(indieDelegate.getMessages().length).toBe(1);
      expect(atom.notifications.getNotifications().length).toBe(1);
    });
  });
  describe('::dispose', function () {
    it('clears messages', function () {
      indieDelegate.setAllMessages([(0, _common.getMessage)(false)]);
      expect(indieDelegate.messages.size).toBe(1);
      indieDelegate.dispose();
      expect(indieDelegate.messages.size).toBe(0);
    });
    it('emits did-destroy event', function () {
      var didDestroy = false;
      indieDelegate.onDidDestroy(function () {
        didDestroy = true;
      });
      expect(didDestroy).toBe(false);
      indieDelegate.dispose();
      expect(didDestroy).toBe(true);
    });
  });
  describe('Legacy features', function () {
    it('has a deleteMessages() has throws on newer version', function () {
      expect(function () {
        indieDelegate.deleteMessages();
      }).toThrow('Call to depreciated method deleteMessages(). Use clearMessages() insead');
    });
    it('has a setMessages() that throws when called with old signature', function () {
      expect(function () {
        indieDelegate.setMessages([]);
      }).toThrow('Invalid Parameters to setMessages()');
    });
    it('sets and clears messages properly on legacy version', function () {
      indieDelegateLegacy.setMessages([(0, _common.getMessageLegacy)(false)]);
      expect(indieDelegateLegacy.getMessages().length).toBe(1);
      indieDelegateLegacy.deleteMessages();
      expect(indieDelegateLegacy.getMessages().length).toBe(0);
    });
    it('does not add invalid messages', function () {
      expect(indieDelegateLegacy.getMessages().length).toBe(0);
      expect(atom.notifications.getNotifications().length).toBe(0);

      indieDelegateLegacy.setMessages([{}]);
      expect(indieDelegateLegacy.getMessages().length).toBe(0);
      expect(atom.notifications.getNotifications().length).toBe(1);

      indieDelegateLegacy.setMessages([(0, _common.getMessageLegacy)(false)]);
      expect(indieDelegateLegacy.getMessages().length).toBe(1);
      expect(atom.notifications.getNotifications().length).toBe(1);
    });
  });
  describe('::onDidUpdate', function () {
    it('includes all of the messages', function () {
      var messagesA = [(0, _common.getMessage)('a'), (0, _common.getMessage)('a'), (0, _common.getMessage)('a'), (0, _common.getMessage)('a'), (0, _common.getMessage)('a')];
      var messagesB = [(0, _common.getMessage)('b'), (0, _common.getMessage)('b'), (0, _common.getMessage)('b'), (0, _common.getMessage)('b'), (0, _common.getMessage)('b')];
      var spyCallback = jasmine.createSpy('onDidUpdate');
      indieDelegate.onDidUpdate(spyCallback);
      indieDelegate.setMessages('a', messagesA);
      indieDelegate.setMessages('b', messagesB);
      indieDelegate.clearMessages();
      expect(spyCallback.calls.length).toBe(3);
      expect(spyCallback.calls[0].args[0]).toEqual(messagesA);
      expect(spyCallback.calls[1].args[0]).toEqual(messagesA.concat(messagesB));
      expect(spyCallback.calls[2].args[0]).toEqual([]);
    });
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9DcmlzRm9ybm8vLmF0b20vcGFja2FnZXMvbGludGVyL3NwZWMvaW5kaWUtZGVsZWdhdGUtc3BlYy5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztnQ0FFMEIsdUJBQXVCOzs7O3NCQUNKLFVBQVU7O0FBRXZELFFBQVEsQ0FBQyxlQUFlLEVBQUUsWUFBVztBQUNuQyxNQUFJLGFBQWEsWUFBQSxDQUFBO0FBQ2pCLE1BQUksbUJBQW1CLFlBQUEsQ0FBQTs7QUFFdkIsWUFBVSxDQUFDLFlBQVc7QUFDcEIsaUJBQWEsR0FBRyxrQ0FBa0I7QUFDaEMsVUFBSSxFQUFFLE9BQU87S0FDZCxFQUFFLENBQUMsQ0FBQyxDQUFBO0FBQ0wsdUJBQW1CLEdBQUcsa0NBQWtCO0FBQ3RDLFVBQUksRUFBRSxjQUFjO0tBQ3JCLEVBQUUsQ0FBQyxDQUFDLENBQUE7R0FDTixDQUFDLENBQUE7QUFDRixXQUFTLENBQUMsWUFBVztBQUNuQixpQkFBYSxDQUFDLE9BQU8sRUFBRSxDQUFBO0FBQ3ZCLHVCQUFtQixDQUFDLE9BQU8sRUFBRSxDQUFBO0dBQzlCLENBQUMsQ0FBQTs7QUFFRixJQUFFLENBQUMsaUNBQWlDLEVBQUUsWUFBVztBQUMvQyxVQUFNLENBQUMsT0FBTyxhQUFhLENBQUMsSUFBSSxDQUFDLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFBO0FBQ2hELFVBQU0sQ0FBQyxhQUFhLENBQUMsSUFBSSxDQUFDLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFBO0FBQ3hDLFVBQU0sQ0FBQyxPQUFPLGFBQWEsQ0FBQyxLQUFLLENBQUMsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUE7QUFDakQsVUFBTSxDQUFDLGFBQWEsQ0FBQyxLQUFLLENBQUMsQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLENBQUE7R0FDNUMsQ0FBQyxDQUFBO0FBQ0YsVUFBUSxDQUFDLG1EQUFtRCxFQUFFLFlBQVc7QUFDdkUsTUFBRSxDQUFDLG1CQUFtQixFQUFFLFlBQVc7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Q0FBQyxDQUFBIiwiZmlsZSI6Ii9Vc2Vycy9DcmlzRm9ybm8vLmF0b20vcGFja2FnZXMvbGludGVyL3NwZWMvaW5kaWUtZGVsZWdhdGUtc3BlYy5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qIEBmbG93ICovXG5cbmltcG9ydCBJbmRpZURlbGVnYXRlIGZyb20gJy4uL2xpYi9pbmRpZS1kZWxlZ2F0ZSdcbmltcG9ydCB7IGdldE1lc3NhZ2UsIGdldE1lc3NhZ2VMZWdhY3kgfSBmcm9tICcuL2NvbW1vbidcblxuZGVzY3JpYmUoJ0luZGllRGVsZWdhdGUnLCBmdW5jdGlvbigpIHtcbiAgbGV0IGluZGllRGVsZWdhdGVcbiAgbGV0IGluZGllRGVsZWdhdGVMZWdhY3lcblxuICBiZWZvcmVFYWNoKGZ1bmN0aW9uKCkge1xuICAgIGluZGllRGVsZWdhdGUgPSBuZXcgSW5kaWVEZWxlZ2F0ZSh7XG4gICAgICBuYW1lOiAnSW5kaWUnLFxuICAgIH0sIDIpXG4gICAgaW5kaWVEZWxlZ2F0ZUxlZ2FjeSA9IG5ldyBJbmRpZURlbGVnYXRlKHtcbiAgICAgIG5hbWU6ICdJbmRpZSBMZWdhY3knLFxuICAgIH0sIDEpXG4gIH0pXG4gIGFmdGVyRWFjaChmdW5jdGlvbigpIHtcbiAgICBpbmRpZURlbGVnYXRlLmRpc3Bvc2UoKVxuICAgIGluZGllRGVsZWdhdGVMZWdhY3kuZGlzcG9zZSgpXG4gIH0pXG5cbiAgaXQoJ2hhcyB0aGUgYmFzaWMgbGludGVyIHByb3BlcnRpZXMnLCBmdW5jdGlvbigpIHtcbiAgICBleHBlY3QodHlwZW9mIGluZGllRGVsZWdhdGUubmFtZSkudG9CZSgnc3RyaW5nJylcbiAgICBleHBlY3QoaW5kaWVEZWxlZ2F0ZS5uYW1lKS50b0JlKCdJbmRpZScpXG4gICAgZXhwZWN0KHR5cGVvZiBpbmRpZURlbGVnYXRlLnNjb3BlKS50b0JlKCdzdHJpbmcnKVxuICAgIGV4cGVjdChpbmRpZURlbGVnYXRlLnNjb3BlKS50b0JlKCdwcm9qZWN0JylcbiAgfSlcbiAgZGVzY3JpYmUoJzo6c2V0TWVzc2FnZXMgJiYgOjpnZXRNZXNzYWdlcyAmJiA6OmNsZWFyTWVzc2FnZXMnLCBmdW5jdGlvbigpIHtcbiAgICBpdCgnd29ya3MgYXMgZXhwZWN0ZWQnLCBmdW5jdGlvbigpIHtcbiAgICAgIGNvbnN0IG1lc3NhZ2UgPSBnZXRNZXNzYWdlKGZhbHNlKVxuICAgICAgZXhwZWN0KGluZGllRGVsZWdhdGUuZ2V0TWVzc2FnZXMoKSkudG9FcXVhbChbXSlcbiAgICAgIGluZGllRGVsZWdhdGUuc2V0TWVzc2FnZXMobWVzc2FnZS5sb2NhdGlvbi5maWxlLCBbbWVzc2FnZV0pXG4gICAgICBleHBlY3QoaW5kaWVEZWxlZ2F0ZS5nZXRNZXNzYWdlcygpKS50b0VxdWFsKFttZXNzYWdlXSlcbiAgICAgIGluZGllRGVsZWdhdGUuY2xlYXJNZXNzYWdlcygpXG4gICAgICBleHBlY3QoaW5kaWVEZWxlZ2F0ZS5nZXRNZXNzYWdlcygpKS50b0VxdWFsKFtdKVxuICAgIH0pXG4gIH0pXG4gIGRlc2NyaWJlKCc6OnNldE1lc3NhZ2VzJywgZnVuY3Rpb24oKSB7XG4gICAgaXQoJ292ZXJ3cml0ZXMgcHJldmlvdXMgbWVzc2FnZXMgZm9yIHRoYXQgZmlsZScsIGZ1bmN0aW9uKCkge1xuICAgICAgY29uc3QgbWVzc2FnZUEgPSBnZXRNZXNzYWdlKGZhbHNlKVxuICAgICAgY29uc3QgbWVzc2FnZUIgPSBnZXRNZXNzYWdlKGZhbHNlKVxuICAgICAgY29uc3QgbWVzc2FnZUMgPSBnZXRNZXNzYWdlKGZhbHNlKVxuICAgICAgZXhwZWN0KGluZGllRGVsZWdhdGUuZ2V0TWVzc2FnZXMoKSkudG9FcXVhbChbXSlcbiAgICAgIGluZGllRGVsZWdhdGUuc2V0TWVzc2FnZXMobWVzc2FnZUEubG9jYXRpb24uZmlsZSwgW21lc3NhZ2VBLCBtZXNzYWdlQl0pXG4gICAgICBleHBlY3QoaW5kaWVEZWxlZ2F0ZS5nZXRNZXNzYWdlcygpKS50b0VxdWFsKFttZXNzYWdlQSwgbWVzc2FnZUJdKVxuICAgICAgaW5kaWVEZWxlZ2F0ZS5zZXRNZXNzYWdlcyhtZXNzYWdlQS5sb2NhdGlvbi5maWxlLCBbbWVzc2FnZUEsIG1lc3NhZ2VDXSlcbiAgICAgIGV4cGVjdChpbmRpZURlbGVnYXRlLmdldE1lc3NhZ2VzKCkpLnRvRXF1YWwoW21lc3NhZ2VBLCBtZXNzYWdlQ10pXG4gICAgICBpbmRpZURlbGVnYXRlLnNldE1lc3NhZ2VzKG1lc3NhZ2VBLmxvY2F0aW9uLmZpbGUsIFttZXNzYWdlQiwgbWVzc2FnZUNdKVxuICAgICAgZXhwZWN0KGluZGllRGVsZWdhdGUuZ2V0TWVzc2FnZXMoKSkudG9FcXVhbChbbWVzc2FnZUIsIG1lc3NhZ2VDXSlcbiAgICAgIGluZGllRGVsZWdhdGUuc2V0TWVzc2FnZXMobWVzc2FnZUEubG9jYXRpb24uZmlsZSwgW21lc3NhZ2VDXSlcbiAgICAgIGV4cGVjdChpbmRpZURlbGVnYXRlLmdldE1lc3NhZ2VzKCkpLnRvRXF1YWwoW21lc3NhZ2VDXSlcbiAgICAgIGluZGllRGVsZWdhdGUuc2V0TWVzc2FnZXMobWVzc2FnZUEubG9jYXRpb24uZmlsZSwgW10pXG4gICAgICBleHBlY3QoaW5kaWVEZWxlZ2F0ZS5nZXRNZXNzYWdlcygpKS50b0VxdWFsKFtdKVxuICAgIH0pXG4gICAgaXQoJ2RvZXMgbm90IHVwZGF0ZSBpZiBpcyBkaXNwb3NlZCcsIGZ1bmN0aW9uKCkge1xuICAgICAgbGV0IHRpbWVzVXBkYXRlZCA9IDBcbiAgICAgIGluZGllRGVsZWdhdGUub25EaWRVcGRhdGUoZnVuY3Rpb24oKSB7XG4gICAgICAgIHRpbWVzVXBkYXRlZCsrXG4gICAgICB9KVxuICAgICAgZXhwZWN0KHRpbWVzVXBkYXRlZCkudG9CZSgwKVxuICAgICAgaW5kaWVEZWxlZ2F0ZS5zZXRNZXNzYWdlcyhfX2ZpbGVuYW1lLCBbZ2V0TWVzc2FnZShfX2ZpbGVuYW1lKV0pXG4gICAgICBleHBlY3QodGltZXNVcGRhdGVkKS50b0JlKDEpXG4gICAgICBpbmRpZURlbGVnYXRlLmRpc3Bvc2UoKVxuICAgICAgaW5kaWVEZWxlZ2F0ZS5zZXRNZXNzYWdlcyhfX2ZpbGVuYW1lLCBbZ2V0TWVzc2FnZShfX2ZpbGVuYW1lKV0pXG4gICAgICBleHBlY3QodGltZXNVcGRhdGVkKS50b0JlKDEpXG4gICAgfSlcbiAgICBpdCgnZG9lcyB1cGRhdGUgaWYgbm90IGRpc3Bvc2VkJywgZnVuY3Rpb24oKSB7XG4gICAgICBsZXQgdGltZXNVcGRhdGVkID0gMFxuICAgICAgaW5kaWVEZWxlZ2F0ZS5vbkRpZFVwZGF0ZShmdW5jdGlvbigpIHtcbiAgICAgICAgdGltZXNVcGRhdGVkKytcbiAgICAgIH0pXG4gICAgICBleHBlY3QodGltZXNVcGRhdGVkKS50b0JlKDApXG4gICAgICBpbmRpZURlbGVnYXRlLnNldE1lc3NhZ2VzKF9fZmlsZW5hbWUsIFtnZXRNZXNzYWdlKF9fZmlsZW5hbWUpXSlcbiAgICAgIGV4cGVjdCh0aW1lc1VwZGF0ZWQpLnRvQmUoMSlcbiAgICAgIGluZGllRGVsZWdhdGUuc2V0TWVzc2FnZXMoX19maWxlbmFtZSwgW2dldE1lc3NhZ2UoX19maWxlbmFtZSldKVxuICAgICAgZXhwZWN0KHRpbWVzVXBkYXRlZCkudG9CZSgyKVxuICAgIH0pXG4gICAgaXQoJ2NyaWVzIGlmIG1lc3NhZ2UgaGFzIGEgZGlmZmVyZW50IGZpbGVQYXRoJywgZnVuY3Rpb24oKSB7XG4gICAgICBleHBlY3QoZnVuY3Rpb24oKSB7XG4gICAgICAgIGluZGllRGVsZWdhdGUuc2V0TWVzc2FnZXMoX19maWxlbmFtZSwgW2dldE1lc3NhZ2UoX19maWxlbmFtZSldKVxuICAgICAgfSkubm90LnRvVGhyb3coKVxuICAgICAgZXhwZWN0KGZ1bmN0aW9uKCkge1xuICAgICAgICBpbmRpZURlbGVnYXRlLnNldE1lc3NhZ2VzKF9fZmlsZW5hbWUsIFtnZXRNZXNzYWdlKF9fZmlsZW5hbWUpLCBnZXRNZXNzYWdlKF9fZmlsZW5hbWUpLCBnZXRNZXNzYWdlKF9fZmlsZW5hbWUpXSlcbiAgICAgIH0pLm5vdC50b1Rocm93KClcbiAgICAgIGV4cGVjdChmdW5jdGlvbigpIHtcbiAgICAgICAgaW5kaWVEZWxlZ2F0ZS5zZXRNZXNzYWdlcyhfX2ZpbGVuYW1lLCBbZ2V0TWVzc2FnZShmYWxzZSldKVxuICAgICAgfSkudG9UaHJvdygnbWVzc2FnZS5sb2NhdGlvbi5maWxlIGRvZXMgbm90IG1hdGNoIHRoZSBnaXZlbiBmaWxlUGF0aCcpXG4gICAgICBleHBlY3QoZnVuY3Rpb24oKSB7XG4gICAgICAgIGluZGllRGVsZWdhdGUuc2V0TWVzc2FnZXMoX19maWxlbmFtZSwgW2dldE1lc3NhZ2UoX19maWxlbmFtZSksIGdldE1lc3NhZ2UoZmFsc2UpXSlcbiAgICAgIH0pLnRvVGhyb3coJ21lc3NhZ2UubG9jYXRpb24uZmlsZSBkb2VzIG5vdCBtYXRjaCB0aGUgZ2l2ZW4gZmlsZVBhdGgnKVxuICAgICAgZXhwZWN0KGZ1bmN0aW9uKCkge1xuICAgICAgICBpbmRpZURlbGVnYXRlLnNldE1lc3NhZ2VzKF9fZmlsZW5hbWUsIFtnZXRNZXNzYWdlKF9fZmlsZW5hbWUpLCBnZXRNZXNzYWdlKGZhbHNlKSwgZ2V0TWVzc2FnZShfX2ZpbGVuYW1lKV0pXG4gICAgICB9KS50b1Rocm93KCdtZXNzYWdlLmxvY2F0aW9uLmZpbGUgZG9lcyBub3QgbWF0Y2ggdGhlIGdpdmVuIGZpbGVQYXRoJylcbiAgICAgIGV4cGVjdChmdW5jdGlvbigpIHtcbiAgICAgICAgaW5kaWVEZWxlZ2F0ZS5zZXRNZXNzYWdlcyhfX2ZpbGVuYW1lLCBbZ2V0TWVzc2FnZShfX2ZpbGVuYW1lKSwgZ2V0TWVzc2FnZShfX2ZpbGVuYW1lKSwgZ2V0TWVzc2FnZShmYWxzZSldKVxuICAgICAgfSkudG9UaHJvdygnbWVzc2FnZS5sb2NhdGlvbi5maWxlIGRvZXMgbm90IG1hdGNoIHRoZSBnaXZlbiBmaWxlUGF0aCcpXG4gICAgfSlcbiAgICBpdCgnZG9lcyBub3QgYWRkIGludmFsaWQgbWVzc2FnZXMnLCBmdW5jdGlvbigpIHtcbiAgICAgIGV4cGVjdChpbmRpZURlbGVnYXRlLmdldE1lc3NhZ2VzKCkubGVuZ3RoKS50b0JlKDApXG4gICAgICBleHBlY3QoYXRvbS5ub3RpZmljYXRpb25zLmdldE5vdGlmaWNhdGlvbnMoKS5sZW5ndGgpLnRvQmUoMClcbiAgICAgIGluZGllRGVsZWdhdGUuc2V0TWVzc2FnZXMoX19maWxlbmFtZSwgW3t9XSlcbiAgICAgIGV4cGVjdChpbmRpZURlbGVnYXRlLmdldE1lc3NhZ2VzKCkubGVuZ3RoKS50b0JlKDApXG4gICAgICBleHBlY3QoYXRvbS5ub3RpZmljYXRpb25zLmdldE5vdGlmaWNhdGlvbnMoKS5sZW5ndGgpLnRvQmUoMSlcbiAgICAgIGluZGllRGVsZWdhdGUuc2V0TWVzc2FnZXMoX19maWxlbmFtZSwgW2dldE1lc3NhZ2UoX19maWxlbmFtZSldKVxuICAgICAgZXhwZWN0KGluZGllRGVsZWdhdGUuZ2V0TWVzc2FnZXMoKS5sZW5ndGgpLnRvQmUoMSlcbiAgICAgIGV4cGVjdChhdG9tLm5vdGlmaWNhdGlvbnMuZ2V0Tm90aWZpY2F0aW9ucygpLmxlbmd0aCkudG9CZSgxKVxuICAgIH0pXG4gIH0pXG4gIGRlc2NyaWJlKCc6OmNsZWFyTWVzc2FnZXMnLCBmdW5jdGlvbigpIHtcbiAgICBpdCgnZG9lcyBub3QgdXBkYXRlIGlmIGRpc3Bvc2VkJywgZnVuY3Rpb24oKSB7XG4gICAgICBsZXQgdGltZXNVcGRhdGVkID0gMFxuICAgICAgaW5kaWVEZWxlZ2F0ZS5vbkRpZFVwZGF0ZShmdW5jdGlvbigpIHtcbiAgICAgICAgdGltZXNVcGRhdGVkKytcbiAgICAgIH0pXG4gICAgICBleHBlY3QodGltZXNVcGRhdGVkKS50b0JlKDApXG4gICAgICBpbmRpZURlbGVnYXRlLnNldE1lc3NhZ2VzKF9fZmlsZW5hbWUsIFtnZXRNZXNzYWdlKF9fZmlsZW5hbWUpXSlcbiAgICAgIGV4cGVjdCh0aW1lc1VwZGF0ZWQpLnRvQmUoMSlcbiAgICAgIGluZGllRGVsZWdhdGUuZGlzcG9zZSgpXG4gICAgICBpbmRpZURlbGVnYXRlLmNsZWFyTWVzc2FnZXMoKVxuICAgICAgZXhwZWN0KHRpbWVzVXBkYXRlZCkudG9CZSgxKVxuICAgIH0pXG4gICAgaXQoJ2RvZXMgdXBkYXRlIGlmIG5vdCBkaXNwb3NlZCcsIGZ1bmN0aW9uKCkge1xuICAgICAgbGV0IHRpbWVzVXBkYXRlZCA9IDBcbiAgICAgIGluZGllRGVsZWdhdGUub25EaWRVcGRhdGUoZnVuY3Rpb24oKSB7XG4gICAgICAgIHRpbWVzVXBkYXRlZCsrXG4gICAgICB9KVxuICAgICAgZXhwZWN0KHRpbWVzVXBkYXRlZCkudG9CZSgwKVxuICAgICAgaW5kaWVEZWxlZ2F0ZS5zZXRNZXNzYWdlcyhfX2ZpbGVuYW1lLCBbZ2V0TWVzc2FnZShfX2ZpbGVuYW1lKV0pXG4gICAgICBleHBlY3QodGltZXNVcGRhdGVkKS50b0JlKDEpXG4gICAgICBpbmRpZURlbGVnYXRlLmNsZWFyTWVzc2FnZXMoKVxuICAgICAgZXhwZWN0KHRpbWVzVXBkYXRlZCkudG9CZSgyKVxuICAgIH0pXG4gIH0pXG4gIGRlc2NyaWJlKCc6OnNldEFsbE1lc3NhZ2VzJywgZnVuY3Rpb24oKSB7XG4gICAgaXQoJ2F1dG9tYXRpY2FsbHkgc3BsaXRzIG1lc3NhZ2VzIGludG8gZmlsZVBhdGggZ3JvdXBzJywgZnVuY3Rpb24oKSB7XG4gICAgICBjb25zdCBtZXNzYWdlQSA9IGdldE1lc3NhZ2UoZmFsc2UpXG4gICAgICBjb25zdCBtZXNzYWdlQiA9IGdldE1lc3NhZ2UoZmFsc2UpXG4gICAgICBjb25zdCBtZXNzYWdlQyA9IGdldE1lc3NhZ2UoZmFsc2UpXG4gICAgICBjb25zdCBtZXNzYWdlRCA9IGdldE1lc3NhZ2UoZmFsc2UpXG5cbiAgICAgIG1lc3NhZ2VDLmxvY2F0aW9uLmZpbGUgPSBfX2ZpbGVuYW1lXG4gICAgICBtZXNzYWdlRC5sb2NhdGlvbi5maWxlID0gX19maWxlbmFtZVxuICAgICAgZXhwZWN0KGluZGllRGVsZWdhdGUubWVzc2FnZXMuc2l6ZSkudG9CZSgwKVxuICAgICAgaW5kaWVEZWxlZ2F0ZS5zZXRBbGxNZXNzYWdlcyhbbWVzc2FnZUEsIG1lc3NhZ2VCLCBtZXNzYWdlQywgbWVzc2FnZURdKVxuICAgICAgZXhwZWN0KGluZGllRGVsZWdhdGUubWVzc2FnZXMuc2l6ZSkudG9CZSgyKVxuXG4gICAgICBjb25zdCBtZXNzYWdlc0EgPSBpbmRpZURlbGVnYXRlLm1lc3NhZ2VzLmdldChtZXNzYWdlQS5sb2NhdGlvbi5maWxlKVxuICAgICAgZXhwZWN0KEFycmF5LmlzQXJyYXkobWVzc2FnZXNBKSkudG9CZSh0cnVlKVxuICAgICAgZXhwZWN0KG1lc3NhZ2VzQSkudG9FcXVhbChbbWVzc2FnZUEsIG1lc3NhZ2VCXSlcblxuICAgICAgY29uc3QgbWVzc2FnZXNCID0gaW5kaWVEZWxlZ2F0ZS5tZXNzYWdlcy5nZXQobWVzc2FnZUMubG9jYXRpb24uZmlsZSlcbiAgICAgIGV4cGVjdChBcnJheS5pc0FycmF5KG1lc3NhZ2VzQikpLnRvQmUodHJ1ZSlcbiAgICAgIGV4cGVjdChtZXNzYWdlc0IpLnRvRXF1YWwoW21lc3NhZ2VDLCBtZXNzYWdlRF0pXG4gICAgfSlcbiAgICBpdCgnZG9lcyBub3QgdXBkYXRlIGlmIGRpc3Bvc2VkJywgZnVuY3Rpb24oKSB7XG4gICAgICBsZXQgdGltZXNVcGRhdGVkID0gMFxuICAgICAgaW5kaWVEZWxlZ2F0ZS5vbkRpZFVwZGF0ZShmdW5jdGlvbigpIHtcbiAgICAgICAgdGltZXNVcGRhdGVkKytcbiAgICAgIH0pXG4gICAgICBleHBlY3QodGltZXNVcGRhdGVkKS50b0JlKDApXG4gICAgICBpbmRpZURlbGVnYXRlLnNldEFsbE1lc3NhZ2VzKFtnZXRNZXNzYWdlKGZhbHNlKV0pXG4gICAgICBleHBlY3QodGltZXNVcGRhdGVkKS50b0JlKDEpXG4gICAgICBpbmRpZURlbGVnYXRlLmRpc3Bvc2UoKVxuICAgICAgaW5kaWVEZWxlZ2F0ZS5zZXRBbGxNZXNzYWdlcyhbXSlcbiAgICAgIGV4cGVjdCh0aW1lc1VwZGF0ZWQpLnRvQmUoMSlcbiAgICB9KVxuICAgIGl0KCdkb2VzIHVwZGF0ZSBpZiBub3QgZGlzcG9zZWQnLCBmdW5jdGlvbigpIHtcbiAgICAgIGxldCB0aW1lc1VwZGF0ZWQgPSAwXG4gICAgICBpbmRpZURlbGVnYXRlLm9uRGlkVXBkYXRlKGZ1bmN0aW9uKCkge1xuICAgICAgICB0aW1lc1VwZGF0ZWQrK1xuICAgICAgfSlcbiAgICAgIGV4cGVjdCh0aW1lc1VwZGF0ZWQpLnRvQmUoMClcbiAgICAgIGluZGllRGVsZWdhdGUuc2V0QWxsTWVzc2FnZXMoW2dldE1lc3NhZ2UoZmFsc2UpXSlcbiAgICAgIGV4cGVjdCh0aW1lc1VwZGF0ZWQpLnRvQmUoMSlcbiAgICAgIGluZGllRGVsZWdhdGUuc2V0QWxsTWVzc2FnZXMoW10pXG4gICAgICBleHBlY3QodGltZXNVcGRhdGVkKS50b0JlKDIpXG4gICAgfSlcbiAgICBpdCgnZG9lcyBub3QgYWRkIGludmFsaWQgbWVzc2FnZXMnLCBmdW5jdGlvbigpIHtcbiAgICAgIGV4cGVjdChpbmRpZURlbGVnYXRlLmdldE1lc3NhZ2VzKCkubGVuZ3RoKS50b0JlKDApXG4gICAgICBleHBlY3QoYXRvbS5ub3RpZmljYXRpb25zLmdldE5vdGlmaWNhdGlvbnMoKS5sZW5ndGgpLnRvQmUoMClcbiAgICAgIGluZGllRGVsZWdhdGUuc2V0QWxsTWVzc2FnZXMoW3t9XSlcbiAgICAgIGV4cGVjdChpbmRpZURlbGVnYXRlLmdldE1lc3NhZ2VzKCkubGVuZ3RoKS50b0JlKDApXG4gICAgICBleHBlY3QoYXRvbS5ub3RpZmljYXRpb25zLmdldE5vdGlmaWNhdGlvbnMoKS5sZW5ndGgpLnRvQmUoMSlcbiAgICAgIGluZGllRGVsZWdhdGUuc2V0QWxsTWVzc2FnZXMoW2dldE1lc3NhZ2UoX19maWxlbmFtZSldKVxuICAgICAgZXhwZWN0KGluZGllRGVsZWdhdGUuZ2V0TWVzc2FnZXMoKS5sZW5ndGgpLnRvQmUoMSlcbiAgICAgIGV4cGVjdChhdG9tLm5vdGlmaWNhdGlvbnMuZ2V0Tm90aWZpY2F0aW9ucygpLmxlbmd0aCkudG9CZSgxKVxuICAgIH0pXG4gIH0pXG4gIGRlc2NyaWJlKCc6OmRpc3Bvc2UnLCBmdW5jdGlvbigpIHtcbiAgICBpdCgnY2xlYXJzIG1lc3NhZ2VzJywgZnVuY3Rpb24oKSB7XG4gICAgICBpbmRpZURlbGVnYXRlLnNldEFsbE1lc3NhZ2VzKFtnZXRNZXNzYWdlKGZhbHNlKV0pXG4gICAgICBleHBlY3QoaW5kaWVEZWxlZ2F0ZS5tZXNzYWdlcy5zaXplKS50b0JlKDEpXG4gICAgICBpbmRpZURlbGVnYXRlLmRpc3Bvc2UoKVxuICAgICAgZXhwZWN0KGluZGllRGVsZWdhdGUubWVzc2FnZXMuc2l6ZSkudG9CZSgwKVxuICAgIH0pXG4gICAgaXQoJ2VtaXRzIGRpZC1kZXN0cm95IGV2ZW50JywgZnVuY3Rpb24oKSB7XG4gICAgICBsZXQgZGlkRGVzdHJveSA9IGZhbHNlXG4gICAgICBpbmRpZURlbGVnYXRlLm9uRGlkRGVzdHJveShmdW5jdGlvbigpIHtcbiAgICAgICAgZGlkRGVzdHJveSA9IHRydWVcbiAgICAgIH0pXG4gICAgICBleHBlY3QoZGlkRGVzdHJveSkudG9CZShmYWxzZSlcbiAgICAgIGluZGllRGVsZWdhdGUuZGlzcG9zZSgpXG4gICAgICBleHBlY3QoZGlkRGVzdHJveSkudG9CZSh0cnVlKVxuICAgIH0pXG4gIH0pXG4gIGRlc2NyaWJlKCdMZWdhY3kgZmVhdHVyZXMnLCBmdW5jdGlvbigpIHtcbiAgICBpdCgnaGFzIGEgZGVsZXRlTWVzc2FnZXMoKSBoYXMgdGhyb3dzIG9uIG5ld2VyIHZlcnNpb24nLCBmdW5jdGlvbigpIHtcbiAgICAgIGV4cGVjdChmdW5jdGlvbigpIHtcbiAgICAgICAgaW5kaWVEZWxlZ2F0ZS5kZWxldGVNZXNzYWdlcygpXG4gICAgICB9KS50b1Rocm93KCdDYWxsIHRvIGRlcHJlY2lhdGVkIG1ldGhvZCBkZWxldGVNZXNzYWdlcygpLiBVc2UgY2xlYXJNZXNzYWdlcygpIGluc2VhZCcpXG4gICAgfSlcbiAgICBpdCgnaGFzIGEgc2V0TWVzc2FnZXMoKSB0aGF0IHRocm93cyB3aGVuIGNhbGxlZCB3aXRoIG9sZCBzaWduYXR1cmUnLCBmdW5jdGlvbigpIHtcbiAgICAgIGV4cGVjdChmdW5jdGlvbigpIHtcbiAgICAgICAgaW5kaWVEZWxlZ2F0ZS5zZXRNZXNzYWdlcyhbXSlcbiAgICAgIH0pLnRvVGhyb3coJ0ludmFsaWQgUGFyYW1ldGVycyB0byBzZXRNZXNzYWdlcygpJylcbiAgICB9KVxuICAgIGl0KCdzZXRzIGFuZCBjbGVhcnMgbWVzc2FnZXMgcHJvcGVybHkgb24gbGVnYWN5IHZlcnNpb24nLCBmdW5jdGlvbigpIHtcbiAgICAgIGluZGllRGVsZWdhdGVMZWdhY3kuc2V0TWVzc2FnZXMoW2dldE1lc3NhZ2VMZWdhY3koZmFsc2UpXSlcbiAgICAgIGV4cGVjdChpbmRpZURlbGVnYXRlTGVnYWN5LmdldE1lc3NhZ2VzKCkubGVuZ3RoKS50b0JlKDEpXG4gICAgICBpbmRpZURlbGVnYXRlTGVnYWN5LmRlbGV0ZU1lc3NhZ2VzKClcbiAgICAgIGV4cGVjdChpbmRpZURlbGVnYXRlTGVnYWN5LmdldE1lc3NhZ2VzKCkubGVuZ3RoKS50b0JlKDApXG4gICAgfSlcbiAgICBpdCgnZG9lcyBub3QgYWRkIGludmFsaWQgbWVzc2FnZXMnLCBmdW5jdGlvbigpIHtcbiAgICAgIGV4cGVjdChpbmRpZURlbGVnYXRlTGVnYWN5LmdldE1lc3NhZ2VzKCkubGVuZ3RoKS50b0JlKDApXG4gICAgICBleHBlY3QoYXRvbS5ub3RpZmljYXRpb25zLmdldE5vdGlmaWNhdGlvbnMoKS5sZW5ndGgpLnRvQmUoMClcblxuICAgICAgaW5kaWVEZWxlZ2F0ZUxlZ2FjeS5zZXRNZXNzYWdlcyhbe31dKVxuICAgICAgZXhwZWN0KGluZGllRGVsZWdhdGVMZWdhY3kuZ2V0TWVzc2FnZXMoKS5sZW5ndGgpLnRvQmUoMClcbiAgICAgIGV4cGVjdChhdG9tLm5vdGlmaWNhdGlvbnMuZ2V0Tm90aWZpY2F0aW9ucygpLmxlbmd0aCkudG9CZSgxKVxuXG4gICAgICBpbmRpZURlbGVnYXRlTGVnYWN5LnNldE1lc3NhZ2VzKFtnZXRNZXNzYWdlTGVnYWN5KGZhbHNlKV0pXG4gICAgICBleHBlY3QoaW5kaWVEZWxlZ2F0ZUxlZ2FjeS5nZXRNZXNzYWdlcygpLmxlbmd0aCkudG9CZSgxKVxuICAgICAgZXhwZWN0KGF0b20ubm90aWZpY2F0aW9ucy5nZXROb3RpZmljYXRpb25zKCkubGVuZ3RoKS50b0JlKDEpXG4gICAgfSlcbiAgfSlcbiAgZGVzY3JpYmUoJzo6b25EaWRVcGRhdGUnLCBmdW5jdGlvbigpIHtcbiAgICBpdCgnaW5jbHVkZXMgYWxsIG9mIHRoZSBtZXNzYWdlcycsIGZ1bmN0aW9uKCkge1xuICAgICAgY29uc3QgbWVzc2FnZXNBID0gW2dldE1lc3NhZ2UoJ2EnKSwgZ2V0TWVzc2FnZSgnYScpLCBnZXRNZXNzYWdlKCdhJyksIGdldE1lc3NhZ2UoJ2EnKSwgZ2V0TWVzc2FnZSgnYScpXVxuICAgICAgY29uc3QgbWVzc2FnZXNCID0gW2dldE1lc3NhZ2UoJ2InKSwgZ2V0TWVzc2FnZSgnYicpLCBnZXRNZXNzYWdlKCdiJyksIGdldE1lc3NhZ2UoJ2InKSwgZ2V0TWVzc2FnZSgnYicpXVxuICAgICAgY29uc3Qgc3B5Q2FsbGJhY2sgPSBqYXNtaW5lLmNyZWF0ZVNweSgnb25EaWRVcGRhdGUnKVxuICAgICAgaW5kaWVEZWxlZ2F0ZS5vbkRpZFVwZGF0ZShzcHlDYWxsYmFjaylcbiAgICAgIGluZGllRGVsZWdhdGUuc2V0TWVzc2FnZXMoJ2EnLCBtZXNzYWdlc0EpXG4gICAgICBpbmRpZURlbGVnYXRlLnNldE1lc3NhZ2VzKCdiJywgbWVzc2FnZXNCKVxuICAgICAgaW5kaWVEZWxlZ2F0ZS5jbGVhck1lc3NhZ2VzKClcbiAgICAgIGV4cGVjdChzcHlDYWxsYmFjay5jYWxscy5sZW5ndGgpLnRvQmUoMylcbiAgICAgIGV4cGVjdChzcHlDYWxsYmFjay5jYWxsc1swXS5hcmdzWzBdKS50b0VxdWFsKG1lc3NhZ2VzQSlcbiAgICAgIGV4cGVjdChzcHlDYWxsYmFjay5jYWxsc1sxXS5hcmdzWzBdKS50b0VxdWFsKG1lc3NhZ2VzQS5jb25jYXQobWVzc2FnZXNCKSlcbiAgICAgIGV4cGVjdChzcHlDYWxsYmFjay5jYWxsc1syXS5hcmdzWzBdKS50b0VxdWFsKFtdKVxuICAgIH0pXG4gIH0pXG59KVxuIl19