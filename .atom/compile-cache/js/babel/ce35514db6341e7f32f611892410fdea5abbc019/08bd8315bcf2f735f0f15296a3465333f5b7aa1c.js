function _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { var callNext = step.bind(null, 'next'); var callThrow = step.bind(null, 'throw'); function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(callNext, callThrow); } } callNext(); }); }; }

// eslint-disable-next-line import/no-extraneous-dependencies

var _jasmineFix = require('jasmine-fix');

// Note, when testing if using fit you must import it!

var _path = require('path');

'use babel';

var lint = require('../lib/main').provideLinter().lint;

var miPath = (0, _path.join)(__dirname, 'files', 'missing_import');
var poPath = (0, _path.join)(__dirname, 'files', 'pragma', 'pragma_once');
var validPath = (0, _path.join)(__dirname, 'files', 'valid.c');
var multiRangePath = (0, _path.join)(__dirname, 'files', 'multi-range.cpp');
var fixitPath = (0, _path.join)(__dirname, 'files', 'fixit.hpp');
var otherPath = (0, _path.join)(__dirname, 'files', 'otherFile');
var otherAPath = (0, _path.join)(otherPath, 'a.cpp');
var otherBPath = (0, _path.join)(otherPath, 'b.hpp');
var fileText = '// This is a comment, this will not return any errors.\n#include "nothing.h"\n\nint main(int argc, char const *argv[]) {\n  /* code */\n  return 0;\n}\n';

describe('The Clang provider for AtomLinter', function () {
  (0, _jasmineFix.beforeEach)(_asyncToGenerator(function* () {
    yield atom.packages.activatePackage('language-c');
    yield atom.packages.activatePackage('linter-clang');
  }));

  (0, _jasmineFix.it)('finds nothing wrong with a valid file', _asyncToGenerator(function* () {
    var editor = yield atom.workspace.open(validPath);
    var messages = yield lint(editor);
    expect(messages.length).toBe(0);
  }));

  describe('handles errors in different file types', function () {
    (0, _jasmineFix.it)('finds a fatal error in "missing_import.c"', _asyncToGenerator(function* () {
      var editor = yield atom.workspace.open(miPath + '.c');
      var messages = yield lint(editor);
      expect(messages.length).toBe(1);
      expect(messages[0].severity).toBe('error');
      expect(messages[0].excerpt).toBe("'nothing.h' file not found");
      expect(messages[0].location.file).toBe(miPath + '.c');
      expect(messages[0].location.position).toEqual([[1, 9], [1, 20]]);
    }));

    (0, _jasmineFix.it)('finds a fatal error in "missing_import.cpp"', _asyncToGenerator(function* () {
      var editor = yield atom.workspace.open(miPath + '.cpp');
      var messages = yield lint(editor);
      expect(messages.length).toBe(1);
      expect(messages[0].severity).toBe('error');
      expect(messages[0].excerpt).toBe("'nothing.h' file not found");
      expect(messages[0].location.file).toBe(miPath + '.cpp');
      expect(messages[0].location.position).toEqual([[1, 9], [1, 20]]);
    }));

    (0, _jasmineFix.it)('finds a fatal error in "missing_import.m"', _asyncToGenerator(function* () {
      var editor = yield atom.workspace.open(miPath + '.m');
      var messages = yield lint(editor);
      expect(messages.length).toBe(1);
      expect(messages[0].severity).toBe('error');
      expect(messages[0].excerpt).toBe("'nothing.h' file not found");
      expect(messages[0].location.file).toBe(miPath + '.m');
      expect(messages[0].location.position).toEqual([[1, 9], [1, 20]]);
    }));

    (0, _jasmineFix.it)('finds a fatal error in "missing_import.mm"', _asyncToGenerator(function* () {
      var editor = yield atom.workspace.open(miPath + '.mm');
      var messages = yield lint(editor);
      expect(messages.length).toBe(1);
      expect(messages[0].severity).toBe('error');
      expect(messages[0].excerpt).toBe("'nothing.h' file not found");
      expect(messages[0].location.file).toBe(miPath + '.mm');
      expect(messages[0].location.position).toEqual([[1, 9], [1, 20]]);
    }));
  });

  describe('handles pragma once properly', function () {
    (0, _jasmineFix.it)('finds a pragma once warning in pragma_once.c', _asyncToGenerator(function* () {
      var editor = yield atom.workspace.open(poPath + '.c');
      var messages = yield lint(editor);
      expect(messages.length).toEqual(1);
      expect(messages[0].severity).toEqual('warning');
      expect(messages[0].excerpt).toEqual('#pragma once in main file [-Wpragma-once-outside-header]');
      expect(messages[0].location.file).toBe(poPath + '.c');
      expect(messages[0].location.position).toEqual([[0, 8], [0, 12]]);
    }));

    (0, _jasmineFix.it)('finds a pragma once warning in pragma_once.cpp', _asyncToGenerator(function* () {
      var editor = yield atom.workspace.open(poPath + '.cpp');
      var messages = yield lint(editor);
      expect(messages.length).toEqual(1);
      expect(messages[0].severity).toEqual('warning');
      expect(messages[0].excerpt).toEqual('#pragma once in main file [-Wpragma-once-outside-header]');
      expect(messages[0].location.file).toBe(poPath + '.cpp');
      expect(messages[0].location.position).toEqual([[0, 8], [0, 12]]);
    }));

    (0, _jasmineFix.it)("doesn't find a pragma once warning in pragma_once.h", _asyncToGenerator(function* () {
      var editor = yield atom.workspace.open(poPath + '.h');
      var messages = yield lint(editor);
      expect(messages.length).toEqual(0);
    }));

    (0, _jasmineFix.it)("doesn't find a pragma once warning in pragma_once.hpp", _asyncToGenerator(function* () {
      var editor = yield atom.workspace.open(poPath + '.hpp');
      var messages = yield lint(editor);
      expect(messages.length).toEqual(0);
    }));
  });

  (0, _jasmineFix.it)('works on a modified file', _asyncToGenerator(function* () {
    // Open the valid file
    var editor = yield atom.workspace.open(validPath);
    // Set the text to invalid text
    editor.setText(fileText);
    // Lint the editor
    var messages = yield lint(editor);
    expect(messages.length).toBe(1);
    expect(messages[0].severity).toBe('error');
    expect(messages[0].excerpt).toBe("'nothing.h' file not found");
    expect(messages[0].location.file).toBe(validPath);
    expect(messages[0].location.position).toEqual([[1, 9], [1, 20]]);
  }));

  (0, _jasmineFix.it)('handles multiple ranges', _asyncToGenerator(function* () {
    var editor = yield atom.workspace.open(multiRangePath);
    var messages = yield lint(editor);
    expect(messages.length).toBe(1);
    expect(messages[0].severity).toBe('error');
    expect(messages[0].excerpt).toBe("invalid operands to binary expression ('double' and 'double')");
    expect(messages[0].location.file).toBe(multiRangePath);
    expect(messages[0].location.position).toEqual([[3, 15], [3, 24]]);
  }));

  (0, _jasmineFix.it)('handles suggested fixes', _asyncToGenerator(function* () {
    var editor = yield atom.workspace.open(fixitPath);
    var messages = yield lint(editor);
    expect(messages.length).toBe(1);
    expect(messages[0].severity).toBe('warning');
    expect(messages[0].excerpt).toBe('extra tokens at end of #endif directive [-Wextra-tokens]');
    expect(messages[0].location.file).toBe(fixitPath);
    expect(messages[0].location.position).toEqual([[3, 7], [3, 14]]);
    expect(messages[0].solutions.length).toBe(1);
    expect(messages[0].solutions[0].position).toEqual([[3, 7], [3, 7]]);
    expect(messages[0].solutions[0].replaceWith).toBe('//');
  }));

  describe('handles messages in other files', function () {
    (0, _jasmineFix.it)('without another editor open', _asyncToGenerator(function* () {
      var editorA = yield atom.workspace.open(otherAPath);
      var messages = yield lint(editorA);
      expect(messages.length).toBe(1);
      expect(messages[0].severity).toBe('error');
      expect(messages[0].excerpt).toBe("invalid '+=' at end of declaration; did you mean '='?");
      expect(messages[0].location.file).toBe(otherBPath);
      expect(messages[0].location.position).toEqual([[2, 8], [2, 9]]);
    }));

    (0, _jasmineFix.it)('with another editor open', _asyncToGenerator(function* () {
      var editorA = yield atom.workspace.open(otherAPath);
      yield atom.workspace.open(otherBPath);
      var messages = yield lint(editorA);
      expect(messages.length).toBe(1);
      expect(messages[0].severity).toBe('error');
      expect(messages[0].excerpt).toBe("invalid '+=' at end of declaration; did you mean '='?");
      expect(messages[0].location.file).toBe(otherBPath);
      expect(messages[0].location.position).toEqual([[2, 8], [2, 12]]);
    }));
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9DcmlzRm9ybm8vLmF0b20vcGFja2FnZXMvbGludGVyLWNsYW5nL3NwZWMvbGludGVyLWNsYW5nLXNwZWMuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7OzswQkFHK0IsYUFBYTs7OztvQkFFdkIsTUFBTTs7QUFMM0IsV0FBVyxDQUFDOztBQU9aLElBQU0sSUFBSSxHQUFHLE9BQU8sQ0FBQyxhQUFhLENBQUMsQ0FBQyxhQUFhLEVBQUUsQ0FBQyxJQUFJLENBQUM7O0FBRXpELElBQU0sTUFBTSxHQUFHLGdCQUFLLFNBQVMsRUFBRSxPQUFPLEVBQUUsZ0JBQWdCLENBQUMsQ0FBQztBQUMxRCxJQUFNLE1BQU0sR0FBRyxnQkFBSyxTQUFTLEVBQUUsT0FBTyxFQUFFLFFBQVEsRUFBRSxhQUFhLENBQUMsQ0FBQztBQUNqRSxJQUFNLFNBQVMsR0FBRyxnQkFBSyxTQUFTLEVBQUUsT0FBTyxFQUFFLFNBQVMsQ0FBQyxDQUFDO0FBQ3RELElBQU0sY0FBYyxHQUFHLGdCQUFLLFNBQVMsRUFBRSxPQUFPLEVBQUUsaUJBQWlCLENBQUMsQ0FBQztBQUNuRSxJQUFNLFNBQVMsR0FBRyxnQkFBSyxTQUFTLEVBQUUsT0FBTyxFQUFFLFdBQVcsQ0FBQyxDQUFDO0FBQ3hELElBQU0sU0FBUyxHQUFHLGdCQUFLLFNBQVMsRUFBRSxPQUFPLEVBQUUsV0FBVyxDQUFDLENBQUM7QUFDeEQsSUFBTSxVQUFVLEdBQUcsZ0JBQUssU0FBUyxFQUFFLE9BQU8sQ0FBQyxDQUFDO0FBQzVDLElBQU0sVUFBVSxHQUFHLGdCQUFLLFNBQVMsRUFBRSxPQUFPLENBQUMsQ0FBQztBQUM1QyxJQUFNLFFBQVEsNkpBT2IsQ0FBQzs7QUFFRixRQUFRLENBQUMsbUNBQW1DLEVBQUUsWUFBTTtBQUNsRCxnREFBVyxhQUFZO0FBQ3JCLFVBQU0sSUFBSSxDQUFDLFFBQVEsQ0FBQyxlQUFlLENBQUMsWUFBWSxDQUFDLENBQUM7QUFDbEQsVUFBTSxJQUFJLENBQUMsUUFBUSxDQUFDLGVBQWUs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RCxDQUFDLENBQUM7QUFDMUYsWUFBTSxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxDQUFDO0FBQ25ELFlBQU0sQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLENBQUMsUUFBUSxDQUFDLFFBQVEsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQztLQUNsRSxFQUFDLENBQUM7R0FDSixDQUFDLENBQUM7Q0FDSixDQUFDLENBQUMiLCJmaWxlIjoiL1VzZXJzL0NyaXNGb3Juby8uYXRvbS9wYWNrYWdlcy9saW50ZXItY2xhbmcvc3BlYy9saW50ZXItY2xhbmctc3BlYy5qcyIsInNvdXJjZXNDb250ZW50IjpbIid1c2UgYmFiZWwnO1xuXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgaW1wb3J0L25vLWV4dHJhbmVvdXMtZGVwZW5kZW5jaWVzXG5pbXBvcnQgeyBiZWZvcmVFYWNoLCBpdCB9IGZyb20gJ2phc21pbmUtZml4Jztcbi8vIE5vdGUsIHdoZW4gdGVzdGluZyBpZiB1c2luZyBmaXQgeW91IG11c3QgaW1wb3J0IGl0IVxuaW1wb3J0IHsgam9pbiB9IGZyb20gJ3BhdGgnO1xuXG5jb25zdCBsaW50ID0gcmVxdWlyZSgnLi4vbGliL21haW4nKS5wcm92aWRlTGludGVyKCkubGludDtcblxuY29uc3QgbWlQYXRoID0gam9pbihfX2Rpcm5hbWUsICdmaWxlcycsICdtaXNzaW5nX2ltcG9ydCcpO1xuY29uc3QgcG9QYXRoID0gam9pbihfX2Rpcm5hbWUsICdmaWxlcycsICdwcmFnbWEnLCAncHJhZ21hX29uY2UnKTtcbmNvbnN0IHZhbGlkUGF0aCA9IGpvaW4oX19kaXJuYW1lLCAnZmlsZXMnLCAndmFsaWQuYycpO1xuY29uc3QgbXVsdGlSYW5nZVBhdGggPSBqb2luKF9fZGlybmFtZSwgJ2ZpbGVzJywgJ211bHRpLXJhbmdlLmNwcCcpO1xuY29uc3QgZml4aXRQYXRoID0gam9pbihfX2Rpcm5hbWUsICdmaWxlcycsICdmaXhpdC5ocHAnKTtcbmNvbnN0IG90aGVyUGF0aCA9IGpvaW4oX19kaXJuYW1lLCAnZmlsZXMnLCAnb3RoZXJGaWxlJyk7XG5jb25zdCBvdGhlckFQYXRoID0gam9pbihvdGhlclBhdGgsICdhLmNwcCcpO1xuY29uc3Qgb3RoZXJCUGF0aCA9IGpvaW4ob3RoZXJQYXRoLCAnYi5ocHAnKTtcbmNvbnN0IGZpbGVUZXh0ID0gYC8vIFRoaXMgaXMgYSBjb21tZW50LCB0aGlzIHdpbGwgbm90IHJldHVybiBhbnkgZXJyb3JzLlxuI2luY2x1ZGUgXCJub3RoaW5nLmhcIlxuXG5pbnQgbWFpbihpbnQgYXJnYywgY2hhciBjb25zdCAqYXJndltdKSB7XG4gIC8qIGNvZGUgKi9cbiAgcmV0dXJuIDA7XG59XG5gO1xuXG5kZXNjcmliZSgnVGhlIENsYW5nIHByb3ZpZGVyIGZvciBBdG9tTGludGVyJywgKCkgPT4ge1xuICBiZWZvcmVFYWNoKGFzeW5jICgpID0+IHtcbiAgICBhd2FpdCBhdG9tLnBhY2thZ2VzLmFjdGl2YXRlUGFja2FnZSgnbGFuZ3VhZ2UtYycpO1xuICAgIGF3YWl0IGF0b20ucGFja2FnZXMuYWN0aXZhdGVQYWNrYWdlKCdsaW50ZXItY2xhbmcnKTtcbiAgfSk7XG5cbiAgaXQoJ2ZpbmRzIG5vdGhpbmcgd3Jvbmcgd2l0aCBhIHZhbGlkIGZpbGUnLCBhc3luYyAoKSA9PiB7XG4gICAgY29uc3QgZWRpdG9yID0gYXdhaXQgYXRvbS53b3Jrc3BhY2Uub3Blbih2YWxpZFBhdGgpO1xuICAgIGNvbnN0IG1lc3NhZ2VzID0gYXdhaXQgbGludChlZGl0b3IpO1xuICAgIGV4cGVjdChtZXNzYWdlcy5sZW5ndGgpLnRvQmUoMCk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdoYW5kbGVzIGVycm9ycyBpbiBkaWZmZXJlbnQgZmlsZSB0eXBlcycsICgpID0+IHtcbiAgICBpdCgnZmluZHMgYSBmYXRhbCBlcnJvciBpbiBcIm1pc3NpbmdfaW1wb3J0LmNcIicsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGVkaXRvciA9IGF3YWl0IGF0b20ud29ya3NwYWNlLm9wZW4oYCR7bWlQYXRofS5jYCk7XG4gICAgICBjb25zdCBtZXNzYWdlcyA9IGF3YWl0IGxpbnQoZWRpdG9yKTtcbiAgICAgIGV4cGVjdChtZXNzYWdlcy5sZW5ndGgpLnRvQmUoMSk7XG4gICAgICBleHBlY3QobWVzc2FnZXNbMF0uc2V2ZXJpdHkpLnRvQmUoJ2Vycm9yJyk7XG4gICAgICBleHBlY3QobWVzc2FnZXNbMF0uZXhjZXJwdCkudG9CZShcIidub3RoaW5nLmgnIGZpbGUgbm90IGZvdW5kXCIpO1xuICAgICAgZXhwZWN0KG1lc3NhZ2VzWzBdLmxvY2F0aW9uLmZpbGUpLnRvQmUoYCR7bWlQYXRofS5jYCk7XG4gICAgICBleHBlY3QobWVzc2FnZXNbMF0ubG9jYXRpb24ucG9zaXRpb24pLnRvRXF1YWwoW1sxLCA5XSwgWzEsIDIwXV0pO1xuICAgIH0pO1xuXG4gICAgaXQoJ2ZpbmRzIGEgZmF0YWwgZXJyb3IgaW4gXCJtaXNzaW5nX2ltcG9ydC5jcHBcIicsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGVkaXRvciA9IGF3YWl0IGF0b20ud29ya3NwYWNlLm9wZW4oYCR7bWlQYXRofS5jcHBgKTtcbiAgICAgIGNvbnN0IG1lc3NhZ2VzID0gYXdhaXQgbGludChlZGl0b3IpO1xuICAgICAgZXhwZWN0KG1lc3NhZ2VzLmxlbmd0aCkudG9CZSgxKTtcbiAgICAgIGV4cGVjdChtZXNzYWdlc1swXS5zZXZlcml0eSkudG9CZSgnZXJyb3InKTtcbiAgICAgIGV4cGVjdChtZXNzYWdlc1swXS5leGNlcnB0KS50b0JlKFwiJ25vdGhpbmcuaCcgZmlsZSBub3QgZm91bmRcIik7XG4gICAgICBleHBlY3QobWVzc2FnZXNbMF0ubG9jYXRpb24uZmlsZSkudG9CZShgJHttaVBhdGh9LmNwcGApO1xuICAgICAgZXhwZWN0KG1lc3NhZ2VzWzBdLmxvY2F0aW9uLnBvc2l0aW9uKS50b0VxdWFsKFtbMSwgOV0sIFsxLCAyMF1dKTtcbiAgICB9KTtcblxuICAgIGl0KCdmaW5kcyBhIGZhdGFsIGVycm9yIGluIFwibWlzc2luZ19pbXBvcnQubVwiJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgZWRpdG9yID0gYXdhaXQgYXRvbS53b3Jrc3BhY2Uub3BlbihgJHttaVBhdGh9Lm1gKTtcbiAgICAgIGNvbnN0IG1lc3NhZ2VzID0gYXdhaXQgbGludChlZGl0b3IpO1xuICAgICAgZXhwZWN0KG1lc3NhZ2VzLmxlbmd0aCkudG9CZSgxKTtcbiAgICAgIGV4cGVjdChtZXNzYWdlc1swXS5zZXZlcml0eSkudG9CZSgnZXJyb3InKTtcbiAgICAgIGV4cGVjdChtZXNzYWdlc1swXS5leGNlcnB0KS50b0JlKFwiJ25vdGhpbmcuaCcgZmlsZSBub3QgZm91bmRcIik7XG4gICAgICBleHBlY3QobWVzc2FnZXNbMF0ubG9jYXRpb24uZmlsZSkudG9CZShgJHttaVBhdGh9Lm1gKTtcbiAgICAgIGV4cGVjdChtZXNzYWdlc1swXS5sb2NhdGlvbi5wb3NpdGlvbikudG9FcXVhbChbWzEsIDldLCBbMSwgMjBdXSk7XG4gICAgfSk7XG5cbiAgICBpdCgnZmluZHMgYSBmYXRhbCBlcnJvciBpbiBcIm1pc3NpbmdfaW1wb3J0Lm1tXCInLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBlZGl0b3IgPSBhd2FpdCBhdG9tLndvcmtzcGFjZS5vcGVuKGAke21pUGF0aH0ubW1gKTtcbiAgICAgIGNvbnN0IG1lc3NhZ2VzID0gYXdhaXQgbGludChlZGl0b3IpO1xuICAgICAgZXhwZWN0KG1lc3NhZ2VzLmxlbmd0aCkudG9CZSgxKTtcbiAgICAgIGV4cGVjdChtZXNzYWdlc1swXS5zZXZlcml0eSkudG9CZSgnZXJyb3InKTtcbiAgICAgIGV4cGVjdChtZXNzYWdlc1swXS5leGNlcnB0KS50b0JlKFwiJ25vdGhpbmcuaCcgZmlsZSBub3QgZm91bmRcIik7XG4gICAgICBleHBlY3QobWVzc2FnZXNbMF0ubG9jYXRpb24uZmlsZSkudG9CZShgJHttaVBhdGh9Lm1tYCk7XG4gICAgICBleHBlY3QobWVzc2FnZXNbMF0ubG9jYXRpb24ucG9zaXRpb24pLnRvRXF1YWwoW1sxLCA5XSwgWzEsIDIwXV0pO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnaGFuZGxlcyBwcmFnbWEgb25jZSBwcm9wZXJseScsICgpID0+IHtcbiAgICBpdCgnZmluZHMgYSBwcmFnbWEgb25jZSB3YXJuaW5nIGluIHByYWdtYV9vbmNlLmMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBlZGl0b3IgPSBhd2FpdCBhdG9tLndvcmtzcGFjZS5vcGVuKGAke3BvUGF0aH0uY2ApO1xuICAgICAgY29uc3QgbWVzc2FnZXMgPSBhd2FpdCBsaW50KGVkaXRvcik7XG4gICAgICBleHBlY3QobWVzc2FnZXMubGVuZ3RoKS50b0VxdWFsKDEpO1xuICAgICAgZXhwZWN0KG1lc3NhZ2VzWzBdLnNldmVyaXR5KS50b0VxdWFsKCd3YXJuaW5nJyk7XG4gICAgICBleHBlY3QobWVzc2FnZXNbMF0uZXhjZXJwdCkudG9FcXVhbCgnI3ByYWdtYSBvbmNlIGluIG1haW4gZmlsZSBbLVdwcmFnbWEtb25jZS1vdXRzaWRlLWhlYWRlcl0nKTtcbiAgICAgIGV4cGVjdChtZXNzYWdlc1swXS5sb2NhdGlvbi5maWxlKS50b0JlKGAke3BvUGF0aH0uY2ApO1xuICAgICAgZXhwZWN0KG1lc3NhZ2VzWzBdLmxvY2F0aW9uLnBvc2l0aW9uKS50b0VxdWFsKFtbMCwgOF0sIFswLCAxMl1dKTtcbiAgICB9KTtcblxuICAgIGl0KCdmaW5kcyBhIHByYWdtYSBvbmNlIHdhcm5pbmcgaW4gcHJhZ21hX29uY2UuY3BwJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgZWRpdG9yID0gYXdhaXQgYXRvbS53b3Jrc3BhY2Uub3BlbihgJHtwb1BhdGh9LmNwcGApO1xuICAgICAgY29uc3QgbWVzc2FnZXMgPSBhd2FpdCBsaW50KGVkaXRvcik7XG4gICAgICBleHBlY3QobWVzc2FnZXMubGVuZ3RoKS50b0VxdWFsKDEpO1xuICAgICAgZXhwZWN0KG1lc3NhZ2VzWzBdLnNldmVyaXR5KS50b0VxdWFsKCd3YXJuaW5nJyk7XG4gICAgICBleHBlY3QobWVzc2FnZXNbMF0uZXhjZXJwdCkudG9FcXVhbCgnI3ByYWdtYSBvbmNlIGluIG1haW4gZmlsZSBbLVdwcmFnbWEtb25jZS1vdXRzaWRlLWhlYWRlcl0nKTtcbiAgICAgIGV4cGVjdChtZXNzYWdlc1swXS5sb2NhdGlvbi5maWxlKS50b0JlKGAke3BvUGF0aH0uY3BwYCk7XG4gICAgICBleHBlY3QobWVzc2FnZXNbMF0ubG9jYXRpb24ucG9zaXRpb24pLnRvRXF1YWwoW1swLCA4XSwgWzAsIDEyXV0pO1xuICAgIH0pO1xuXG4gICAgaXQoXCJkb2Vzbid0IGZpbmQgYSBwcmFnbWEgb25jZSB3YXJuaW5nIGluIHByYWdtYV9vbmNlLmhcIiwgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgZWRpdG9yID0gYXdhaXQgYXRvbS53b3Jrc3BhY2Uub3BlbihgJHtwb1BhdGh9LmhgKTtcbiAgICAgIGNvbnN0IG1lc3NhZ2VzID0gYXdhaXQgbGludChlZGl0b3IpO1xuICAgICAgZXhwZWN0KG1lc3NhZ2VzLmxlbmd0aCkudG9FcXVhbCgwKTtcbiAgICB9KTtcblxuICAgIGl0KFwiZG9lc24ndCBmaW5kIGEgcHJhZ21hIG9uY2Ugd2FybmluZyBpbiBwcmFnbWFfb25jZS5ocHBcIiwgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgZWRpdG9yID0gYXdhaXQgYXRvbS53b3Jrc3BhY2Uub3BlbihgJHtwb1BhdGh9LmhwcGApO1xuICAgICAgY29uc3QgbWVzc2FnZXMgPSBhd2FpdCBsaW50KGVkaXRvcik7XG4gICAgICBleHBlY3QobWVzc2FnZXMubGVuZ3RoKS50b0VxdWFsKDApO1xuICAgIH0pO1xuICB9KTtcblxuICBpdCgnd29ya3Mgb24gYSBtb2RpZmllZCBmaWxlJywgYXN5bmMgKCkgPT4ge1xuICAgIC8vIE9wZW4gdGhlIHZhbGlkIGZpbGVcbiAgICBjb25zdCBlZGl0b3IgPSBhd2FpdCBhdG9tLndvcmtzcGFjZS5vcGVuKHZhbGlkUGF0aCk7XG4gICAgLy8gU2V0IHRoZSB0ZXh0IHRvIGludmFsaWQgdGV4dFxuICAgIGVkaXRvci5zZXRUZXh0KGZpbGVUZXh0KTtcbiAgICAvLyBMaW50IHRoZSBlZGl0b3JcbiAgICBjb25zdCBtZXNzYWdlcyA9IGF3YWl0IGxpbnQoZWRpdG9yKTtcbiAgICBleHBlY3QobWVzc2FnZXMubGVuZ3RoKS50b0JlKDEpO1xuICAgIGV4cGVjdChtZXNzYWdlc1swXS5zZXZlcml0eSkudG9CZSgnZXJyb3InKTtcbiAgICBleHBlY3QobWVzc2FnZXNbMF0uZXhjZXJwdCkudG9CZShcIidub3RoaW5nLmgnIGZpbGUgbm90IGZvdW5kXCIpO1xuICAgIGV4cGVjdChtZXNzYWdlc1swXS5sb2NhdGlvbi5maWxlKS50b0JlKHZhbGlkUGF0aCk7XG4gICAgZXhwZWN0KG1lc3NhZ2VzWzBdLmxvY2F0aW9uLnBvc2l0aW9uKS50b0VxdWFsKFtbMSwgOV0sIFsxLCAyMF1dKTtcbiAgfSk7XG5cbiAgaXQoJ2hhbmRsZXMgbXVsdGlwbGUgcmFuZ2VzJywgYXN5bmMgKCkgPT4ge1xuICAgIGNvbnN0IGVkaXRvciA9IGF3YWl0IGF0b20ud29ya3NwYWNlLm9wZW4obXVsdGlSYW5nZVBhdGgpO1xuICAgIGNvbnN0IG1lc3NhZ2VzID0gYXdhaXQgbGludChlZGl0b3IpO1xuICAgIGV4cGVjdChtZXNzYWdlcy5sZW5ndGgpLnRvQmUoMSk7XG4gICAgZXhwZWN0KG1lc3NhZ2VzWzBdLnNldmVyaXR5KS50b0JlKCdlcnJvcicpO1xuICAgIGV4cGVjdChtZXNzYWdlc1swXS5leGNlcnB0KS50b0JlKFwiaW52YWxpZCBvcGVyYW5kcyB0byBiaW5hcnkgZXhwcmVzc2lvbiAoJ2RvdWJsZScgYW5kICdkb3VibGUnKVwiKTtcbiAgICBleHBlY3QobWVzc2FnZXNbMF0ubG9jYXRpb24uZmlsZSkudG9CZShtdWx0aVJhbmdlUGF0aCk7XG4gICAgZXhwZWN0KG1lc3NhZ2VzWzBdLmxvY2F0aW9uLnBvc2l0aW9uKS50b0VxdWFsKFtbMywgMTVdLCBbMywgMjRdXSk7XG4gIH0pO1xuXG4gIGl0KCdoYW5kbGVzIHN1Z2dlc3RlZCBmaXhlcycsIGFzeW5jICgpID0+IHtcbiAgICBjb25zdCBlZGl0b3IgPSBhd2FpdCBhdG9tLndvcmtzcGFjZS5vcGVuKGZpeGl0UGF0aCk7XG4gICAgY29uc3QgbWVzc2FnZXMgPSBhd2FpdCBsaW50KGVkaXRvcik7XG4gICAgZXhwZWN0KG1lc3NhZ2VzLmxlbmd0aCkudG9CZSgxKTtcbiAgICBleHBlY3QobWVzc2FnZXNbMF0uc2V2ZXJpdHkpLnRvQmUoJ3dhcm5pbmcnKTtcbiAgICBleHBlY3QobWVzc2FnZXNbMF0uZXhjZXJwdCkudG9CZSgnZXh0cmEgdG9rZW5zIGF0IGVuZCBvZiAjZW5kaWYgZGlyZWN0aXZlIFstV2V4dHJhLXRva2Vuc10nKTtcbiAgICBleHBlY3QobWVzc2FnZXNbMF0ubG9jYXRpb24uZmlsZSkudG9CZShmaXhpdFBhdGgpO1xuICAgIGV4cGVjdChtZXNzYWdlc1swXS5sb2NhdGlvbi5wb3NpdGlvbikudG9FcXVhbChbWzMsIDddLCBbMywgMTRdXSk7XG4gICAgZXhwZWN0KG1lc3NhZ2VzWzBdLnNvbHV0aW9ucy5sZW5ndGgpLnRvQmUoMSk7XG4gICAgZXhwZWN0KG1lc3NhZ2VzWzBdLnNvbHV0aW9uc1swXS5wb3NpdGlvbikudG9FcXVhbChbWzMsIDddLCBbMywgN11dKTtcbiAgICBleHBlY3QobWVzc2FnZXNbMF0uc29sdXRpb25zWzBdLnJlcGxhY2VXaXRoKS50b0JlKCcvLycpO1xuICB9KTtcblxuICBkZXNjcmliZSgnaGFuZGxlcyBtZXNzYWdlcyBpbiBvdGhlciBmaWxlcycsICgpID0+IHtcbiAgICBpdCgnd2l0aG91dCBhbm90aGVyIGVkaXRvciBvcGVuJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgZWRpdG9yQSA9IGF3YWl0IGF0b20ud29ya3NwYWNlLm9wZW4ob3RoZXJBUGF0aCk7XG4gICAgICBjb25zdCBtZXNzYWdlcyA9IGF3YWl0IGxpbnQoZWRpdG9yQSk7XG4gICAgICBleHBlY3QobWVzc2FnZXMubGVuZ3RoKS50b0JlKDEpO1xuICAgICAgZXhwZWN0KG1lc3NhZ2VzWzBdLnNldmVyaXR5KS50b0JlKCdlcnJvcicpO1xuICAgICAgZXhwZWN0KG1lc3NhZ2VzWzBdLmV4Y2VycHQpLnRvQmUoXCJpbnZhbGlkICcrPScgYXQgZW5kIG9mIGRlY2xhcmF0aW9uOyBkaWQgeW91IG1lYW4gJz0nP1wiKTtcbiAgICAgIGV4cGVjdChtZXNzYWdlc1swXS5sb2NhdGlvbi5maWxlKS50b0JlKG90aGVyQlBhdGgpO1xuICAgICAgZXhwZWN0KG1lc3NhZ2VzWzBdLmxvY2F0aW9uLnBvc2l0aW9uKS50b0VxdWFsKFtbMiwgOF0sIFsyLCA5XV0pO1xuICAgIH0pO1xuXG4gICAgaXQoJ3dpdGggYW5vdGhlciBlZGl0b3Igb3BlbicsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGVkaXRvckEgPSBhd2FpdCBhdG9tLndvcmtzcGFjZS5vcGVuKG90aGVyQVBhdGgpO1xuICAgICAgYXdhaXQgYXRvbS53b3Jrc3BhY2Uub3BlbihvdGhlckJQYXRoKTtcbiAgICAgIGNvbnN0IG1lc3NhZ2VzID0gYXdhaXQgbGludChlZGl0b3JBKTtcbiAgICAgIGV4cGVjdChtZXNzYWdlcy5sZW5ndGgpLnRvQmUoMSk7XG4gICAgICBleHBlY3QobWVzc2FnZXNbMF0uc2V2ZXJpdHkpLnRvQmUoJ2Vycm9yJyk7XG4gICAgICBleHBlY3QobWVzc2FnZXNbMF0uZXhjZXJwdCkudG9CZShcImludmFsaWQgJys9JyBhdCBlbmQgb2YgZGVjbGFyYXRpb247IGRpZCB5b3UgbWVhbiAnPSc/XCIpO1xuICAgICAgZXhwZWN0KG1lc3NhZ2VzWzBdLmxvY2F0aW9uLmZpbGUpLnRvQmUob3RoZXJCUGF0aCk7XG4gICAgICBleHBlY3QobWVzc2FnZXNbMF0ubG9jYXRpb24ucG9zaXRpb24pLnRvRXF1YWwoW1syLCA4XSwgWzIsIDEyXV0pO1xuICAgIH0pO1xuICB9KTtcbn0pO1xuIl19